"use strict";(self.webpackChunkwater_bs=self.webpackChunkwater_bs||[]).push([[7086],{7086:function(t,e,n){n.r(e),n.d(e,{default:function(){return m}});var a=n(5861),i=n(9439),r=n(7757),o=n.n(r),c=n(2791),s=n(3695),d=n(6755),l=n(3099),u=n(7309),f=n(1577),h=n(2862),p=n(4569),w=n.n(p),g=n(184);function m(){var t=(0,c.useState)(!1),e=(0,i.Z)(t,2),n=e[0],r=e[1],p=(0,c.useState)(),m=(0,i.Z)(p,2),x=m[0],Z=m[1],k=JSON.parse(localStorage.getItem("loginUser"));(0,c.useEffect)((0,a.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.ZP.destroy(),t.next=3,w().get("http://localhost:8080/queryAbleGift");case 3:return e=t.sent,y(e.data.data),t.abrupt("return",(function(){}));case 6:case"end":return t.stop()}}),t)}))),[]);var v=(0,c.useState)(0),b=(0,i.Z)(v,2),j=b[0],y=b[1],I=[{title:"\u793c\u54c1\u540d\u79f0",dataIndex:"name",width:"20%"},{title:"\u56fe\u7247",dataIndex:"photo",width:"20%",render:function(t,e){return(0,g.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,g.jsx)(d.Z,{width:100,height:100,src:"http://localhost:8080/getGiftPhoto?id=".concat(e.id)})})}},{title:"\u4ef7\u683c",dataIndex:"price",width:"20%",align:"center",defaultSortOrder:"descend",sorter:function(t,e){return t.price-e.price}},{title:"\u5e93\u5b58",dataIndex:"stock",width:"20%",align:"center"},{title:"Action",key:"action",width:"15%",render:function(t,e){return(0,g.jsx)(l.Z,{size:"middle",children:(0,g.jsx)(u.Z,{type:"primary",onClick:function(){var t;t=e.id,console.log("\u5151\u6362\u793c\u7269\u7684id\u662f:",t),Z(t),r(!0)},children:"\u5151\u6362"})})}}];return(0,g.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[(0,g.jsx)(f.Z,{columns:I,dataSource:j}),(0,g.jsx)(h.Z,{title:"\u63d0\u793a",visible:n,onOk:function(){w().post("http://localhost:8080/exchangeGift",{userid:k.id,giftId:x}).then((function(t){console.log(t),"0"===t.data.state?(s.ZP.success(t.data.message,1),r(!1),setTimeout((function(){window.location.reload()}),800)):(s.ZP.error(t.data.message,1),r(!1))})).catch((function(t){s.ZP.error("\u7f51\u7edc\u5f02\u5e38!",1),setTimeout((function(){window.location.reload()}),800)}))},onCancel:function(){r(!1)},children:"\u786e\u8ba4\u5151\u6362?"})]})}}}]);
//# sourceMappingURL=7086.83d6c7b5.chunk.js.map