"use strict";(self.webpackChunkwater_bs=self.webpackChunkwater_bs||[]).push([[8606],{9565:function(e,t,n){function r(e){for(var t in e)if(null!=e[t])return!1;return!0}n.d(t,{t:function(){return r}})},8606:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var r=n(1413),o=n(5861),a=n(7762),l=n(9439),c=n(7757),s=n.n(c),i=n(2791),u=n(2014),d=n(521),f=n(9389),h=n(586),m=n(3695),p=n(6106),Z=n(914),x=n(9228),y=n(9553),v=n(2649),g=n(394),j=n(7309),b=n(1333),w=n(2126),E=n(6755),C=n(2862),S=n(6904),P=n(6871),R=n(4569),N=n.n(R),M=n(9565),T=n(116),k=n(2426),O=n.n(k),z=n(184),A=T.Z,I=u.Z.Group,L=d.Z.Title,D=f.Z.TextArea;function F(){var e={},t=(0,P.s0)(),n=(0,i.useState)(JSON.parse(localStorage.getItem("loginOrg"))),c=(0,l.Z)(n,2),u=c[0],d=(c[1],h.Z.Content),R=(0,i.useState)(!1),T=(0,l.Z)(R,2),k=T[0],F=T[1],H=(0,i.useState)(u.id),Y=(0,l.Z)(H,2),q=Y[0],G=(Y[1],(0,i.useState)(!1)),$=(0,l.Z)(G,2),_=$[0],U=$[1],J=(0,i.useRef)(),K=(0,i.useRef)(),V=(0,i.useRef)(),B=(0,i.useRef)(),Q=(0,i.useRef)(),W=(0,i.useRef)(),X=(0,i.useRef)(),ee=(0,i.useRef)(),te=(0,i.useState)(),ne=(0,l.Z)(te,2),re=ne[0],oe=ne[1],ae=(0,i.useState)([]),le=(0,l.Z)(ae,2),ce=le[0],se=le[1],ie=(0,i.useState)([]),ue=(0,l.Z)(ie,2),de=ue[0],fe=ue[1],he=i.useState(de),me=(0,l.Z)(he,2),pe=me[0],Ze=me[1],xe=(0,i.useState)([]),ye=(0,l.Z)(xe,2),ve=ye[0],ge=ye[1];(0,i.useEffect)((function(){return m.ZP.destroy(),N().post("http://localhost:8080/qryGoods").then((function(e){console.log("goods\u8868\u5217\u8868\u5185\u5bb9",e);for(var t=[],n=0;n<e.data.data.length;n++)t.push(e.data.data[n].goodname);console.log("goods\u8868\u5185\u6240\u6709\u7269\u54c1:",t),se(t)})),N().post("http://localhost:8080/qryGoodsNeed?orgid="+u.id).then((function(e){console.log("goodsneed\u8868\u4e2d\u8fd9\u4e2aorg\u9700\u8981\u7684\u7269\u54c1\u6709",e);for(var t=[],n=0;n<e.data.data.length;n++)t.push(e.data.data[n].goodsname);console.log("\u8fd9\u4e2aorg\u9700\u8981\u7684\u7269\u54c1\u6709",t),fe(t),Ze(t)})),N().get("http://localhost:8080/qryOrgNoticeList?orgid="+u.id).then((function(e){console.log("\u52a8\u6001\u5217\u8868",e),ge(e.data.data)})),function(){}}),[]);var je={onRemove:function(e){oe("")},beforeUpload:function(e){return oe(e),!1},file:re},be=function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(m.ZP.success("".concat(e.file.name," \u66f4\u6362\u6210\u529f")),setTimeout((function(){window.location.reload()}),500)):"error"===e.file.status&&m.ZP.error("".concat(e.file.name," \u7f51\u7edc\u5f02\u5e38."))},we=function(){var e=(0,o.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=X.current.state.value){e.next=3;break}return m.ZP.error("\u8bf7\u8f93\u5165\u6807\u9898",1),e.abrupt("return");case 3:if(void 0!=ee.current.resizableTextArea.textArea.value&&""!=ee.current.resizableTextArea.textArea.value){e.next=6;break}return m.ZP.error("\u8bf7\u8f93\u5165\u6b63\u6587\u5185\u5bb9",1),e.abrupt("return");case 6:if(null!=re&&""!=re){e.next=9;break}return m.ZP.error("\u8bf7\u4e0a\u4f20\u4e00\u5f20\u56fe\u7247",1),e.abrupt("return");case 9:return(t=new FormData).append("title",X.current.state.value),t.append("orgid",u.id),t.append("msg",ee.current.resizableTextArea.textArea.value),t.append("file",re),e.next=16,N().post("http://localhost:8080/createOrgNotice",t);case 16:"0"==(n=e.sent).data.state?(m.ZP.success(n.data.message),setTimeout((function(){window.location.reload()}),500)):m.ZP.error(n.data.message);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,z.jsxs)(d,{style:{padding:15,backgroundColor:"#FFF"},children:[(0,z.jsx)(p.Z,{children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(L,{level:3,children:"\u673a\u6784\u8d44\u6599"})})}),(0,z.jsx)(p.Z,{justify:"center",children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(x.Z,{placement:"topLeft",content:"\u70b9\u51fb\u4fee\u6539\u5934\u50cf",children:(0,z.jsx)(y.Z,{maxCount:1,action:"http://localhost:8080/saveUserHead?id=".concat(q),onChange:be,children:(0,z.jsx)(v.C,{src:"http://localhost:8080/getOrgHead?id=".concat(q),alt:"\u673a\u6784\u5934\u50cf",size:100})})})})}),(0,z.jsxs)(p.Z,{justify:"center",style:{marginTop:"0.3REM"},children:[(0,z.jsx)(Z.Z,{children:(0,z.jsxs)(g.Z,{bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},size:"middle ",children:[(0,z.jsx)(g.Z.Item,{label:"\u673a\u6784\u540d\u79f0",children:u.orgname}),(0,z.jsx)(g.Z.Item,{label:"\u6240\u5728\u57ce\u5e02",children:u.city||"-"}),(0,z.jsx)(g.Z.Item,{label:"\u8be6\u7ec6\u5730\u5740",children:u.address||"-"}),(0,z.jsx)(g.Z.Item,{label:"\u90ae\u7bb1",children:u.email||"-"}),(0,z.jsx)(g.Z.Item,{label:"\u8054\u7cfb\u7535\u8bdd",children:u.phone||"-"}),(0,z.jsx)(g.Z.Item,{label:"\u673a\u6784\u4ecb\u7ecd",children:u.orgmsg||"-"}),(0,z.jsx)(g.Z.Item,{label:"\u7d2f\u8ba1\u79ef\u5206",children:u.point||"-"}),(0,z.jsx)(g.Z.Item,{label:"\u64cd\u4f5c",children:(0,z.jsxs)(p.Z,{justify:"space-around",gutter:8,children:[(0,z.jsx)(Z.Z,{children:(0,z.jsx)(j.Z,{size:"small",type:"primary",onClick:function(){F(!0),J.current.state.value="",K.current.state.value="",V.current.state.value="",B.current.state.value="",Q.current.state.value=""},children:"\u4fee\u6539\u4fe1\u606f"})}),(0,z.jsx)(Z.Z,{children:(0,z.jsx)(j.Z,{size:"small",type:"primary",onClick:function(){U(!0)},children:"\u53d1\u5e03\u52a8\u6001"})})]})})]})}),(0,z.jsx)(b.Z,{})]}),(0,z.jsx)(p.Z,{children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(L,{level:3,children:"\u7269\u8d44\u9700\u6c42"})})}),(0,z.jsxs)(p.Z,{children:[(0,z.jsx)(Z.Z,{xl:20,children:(0,z.jsx)(I,{options:ce,value:pe,onChange:function(e){Ze(e),console.log("\u6539\u53d8\u540e\u9700\u8981\u7684\u7269\u8d44\u6709:",e)}})}),(0,z.jsx)(Z.Z,{xl:4,children:(0,z.jsx)(j.Z,{type:"primary",onClick:function(){var e={};e.orgid=u.id,e.newgoodsneed=pe,console.log(e),N().post("http://localhost:8080/updategoodsneed",e).then((function(e){console.log(e),m.ZP.success("\u64cd\u4f5c\u6210\u529f!",1),setTimeout((function(){window.location.reload()}),500)}))},children:"\u4fdd\u5b58\u9700\u6c42"})})]}),(0,z.jsx)(b.Z,{}),(0,z.jsx)(p.Z,{children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(L,{level:3,children:"\u6700\u8fd1\u52a8\u6001"})})}),(0,z.jsx)(w.ZP,{itemLayout:"vertical",size:"small",pagination:{pageSize:2},dataSource:ve,renderItem:function(e){return(0,z.jsxs)(w.ZP.Item,{extra:(0,z.jsx)(E.Z,{width:220,height:180,alt:"logo",src:"http://localhost:8080/getNoticePhoto?id="+e.id}),children:[(0,z.jsx)(w.ZP.Item.Meta,{avatar:(0,z.jsx)(v.C,{src:"http://localhost:8080/getOrgHead?id=".concat(u.id)}),title:e.title,description:O()(Number(e.createtime)).format("YYYY-MM-DD HH:mm:ss")}),e.msg]},e.title)}}),(0,z.jsxs)(C.Z,{title:"\u7f16\u8f91\u8d44\u6599",visible:k,onOk:function(){if(e.password=J.current.state.value||null,e.orgname=K.current.state.value||null,e.address=V.current.state.value||null,e.phone=B.current.state.value||null,e.email=Q.current.state.value||null,e.orgmsg=W.current.resizableTextArea.textArea.value||null,console.log("\u4fee\u6539\u540e\u673a\u6784\u4fe1\u606f:",e),console.log("\u7a7a\u5bf9\u8c61:",(0,M.t)(e)),!(0,M.t)(e)){e.id=q;return null==e.email||/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(e.email)?null==e.phone||/^1[3|4|5|7|8]\d{9}$/.test(e.phone)?null==e.password||/^[a-zA-Z0-9]{6,18}$/.test(e.password)?void N().post("http://localhost:8080/editOrg",e).then((function(e){"0"===e.data.state?(m.ZP.success(e.data.message,1),setTimeout((function(){window.location.reload(),F(!1)}),1e3)):m.ZP.error(e.data.message,1)})).catch((function(e){m.ZP.error("\u8bf7\u6c42\u8d85\u65f6!",1),setTimeout((function(){t("/menu/donation/*"),F(!1)}),1e3)})):(m.ZP.error("\u5bc6\u7801\u4e3a6-18\u4f4d\u6570\u5b57\u5b57\u6bcd\u7ec4\u5408!"),void F(!1)):(m.ZP.error("\u624b\u673a\u683c\u5f0f\u9519\u8bef!"),void F(!1)):(m.ZP.error("\u90ae\u7bb1\u683c\u5f0f\u9519\u8bef!"),void F(!1))}F(!1)},onCancel:function(){F(!1),e={}},centered:!0,children:[(0,z.jsx)(p.Z,{justify:"center",children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(f.Z,{type:"password",placeholder:"\u5bc6\u7801",style:{width:"1.7REM",marginTop:"0.03REM"},ref:J})})}),(0,z.jsx)(p.Z,{justify:"center",children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(f.Z,{placeholder:"\u673a\u6784\u540d\u79f0",style:{width:"1.7REM",marginTop:"0.03REM"},ref:K})})}),(0,z.jsx)(p.Z,{justify:"center",children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(f.Z,{placeholder:"\u5730\u5740",style:{width:"1.7REM",marginTop:"0.03REM"},ref:V})})}),(0,z.jsx)(p.Z,{justify:"center",children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(f.Z,{placeholder:"\u8054\u7cfb\u7535\u8bdd",style:{width:"1.7REM",marginTop:"0.03REM"},ref:B})})}),(0,z.jsx)(p.Z,{justify:"center",children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(f.Z,{placeholder:"\u90ae\u7bb1",style:{width:"1.7REM",marginTop:"0.03REM"},ref:Q})})}),(0,z.jsx)(p.Z,{justify:"center",children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(S.Z,{placeholder:"\u57ce\u5e02",style:{width:"1.7REM",marginTop:"0.03REM"},onChange:function(t){var n,r="",o=(0,a.Z)(t);try{for(o.s();!(n=o.n()).done;){r+=n.value}}catch(l){o.e(l)}finally{o.f()}console.log(r),e.city=r},options:A,defaultValue:""})})}),(0,z.jsx)(p.Z,{justify:"center",children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(f.Z.TextArea,{placeholder:"\u673a\u6784\u4ecb\u7ecd",style:{width:"1.7REM",marginTop:"0.03REM"},ref:W})})})]}),(0,z.jsxs)(C.Z,{title:"\u53d1\u5e03\u52a8\u6001",visible:_,onOk:we,onCancel:function(){U(!1)},centered:!0,children:[(0,z.jsx)(p.Z,{justify:"center",children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(f.Z,{placeholder:"\u8f93\u5165\u6807\u9898",ref:X,style:{width:"1.7REM",marginTop:"0.03REM"}})})}),(0,z.jsx)(p.Z,{justify:"center",children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(D,{placeholder:"\u8f93\u5165\u6b63\u6587",ref:ee,style:{width:"1.7REM",marginTop:"0.03REM"}})})}),(0,z.jsx)(p.Z,{justify:"center",children:(0,z.jsx)(Z.Z,{children:(0,z.jsx)(y.Z,(0,r.Z)((0,r.Z)({maxCount:1},je),{},{onChange:be,style:{width:"1.7REM",marginTop:"0.03REM"},children:(0,z.jsx)(j.Z,{style:{width:"100%"},children:"\u4e0a\u4f20\u56fe\u7247"})}))})})]})]})}},394:function(e,t,n){n.d(t,{K:function(){return g},Z:function(){return E}});var r=n(4942),o=n(9439),a=n(1002),l=n(2791),c=n(1694),s=n.n(c),i=n(5501),u=n(8295),d=n(4824),f=n(9077),h=n(7462);function m(e){return void 0!==e&&null!==e}var p=function(e){var t,n=e.itemPrefixCls,o=e.component,a=e.span,c=e.className,i=e.style,u=e.labelStyle,d=e.contentStyle,f=e.bordered,h=e.label,p=e.content,Z=e.colon,x=o;return f?l.createElement(x,{className:s()((t={},(0,r.Z)(t,"".concat(n,"-item-label"),m(h)),(0,r.Z)(t,"".concat(n,"-item-content"),m(p)),t),c),style:i,colSpan:a},m(h)&&l.createElement("span",{style:u},h),m(p)&&l.createElement("span",{style:d},p)):l.createElement(x,{className:s()("".concat(n,"-item"),c),style:i,colSpan:a},l.createElement("div",{className:"".concat(n,"-item-container")},h&&l.createElement("span",{className:s()("".concat(n,"-item-label"),(0,r.Z)({},"".concat(n,"-item-no-colon"),!Z)),style:u},h),p&&l.createElement("span",{className:s()("".concat(n,"-item-content")),style:d},p)))};function Z(e,t,n){var r=t.colon,o=t.prefixCls,a=t.bordered,c=n.component,s=n.type,i=n.showLabel,u=n.showContent,d=n.labelStyle,f=n.contentStyle;return e.map((function(e,t){var n=e.props,m=n.label,Z=n.children,x=n.prefixCls,y=void 0===x?o:x,v=n.className,g=n.style,j=n.labelStyle,b=n.contentStyle,w=n.span,E=void 0===w?1:w,C=e.key;return"string"===typeof c?l.createElement(p,{key:"".concat(s,"-").concat(C||t),className:v,style:g,labelStyle:(0,h.Z)((0,h.Z)({},d),j),contentStyle:(0,h.Z)((0,h.Z)({},f),b),span:E,colon:r,component:c,itemPrefixCls:y,bordered:a,label:i?m:null,content:u?Z:null}):[l.createElement(p,{key:"label-".concat(C||t),className:v,style:(0,h.Z)((0,h.Z)((0,h.Z)({},d),g),j),span:1,colon:r,component:c[0],itemPrefixCls:y,bordered:a,label:m}),l.createElement(p,{key:"content-".concat(C||t),className:v,style:(0,h.Z)((0,h.Z)((0,h.Z)({},f),g),b),span:2*E-1,component:c[1],itemPrefixCls:y,bordered:a,content:Z})]}))}var x=function(e){var t=l.useContext(g),n=e.prefixCls,r=e.vertical,o=e.row,a=e.index,c=e.bordered;return r?l.createElement(l.Fragment,null,l.createElement("tr",{key:"label-".concat(a),className:"".concat(n,"-row")},Z(o,e,(0,h.Z)({component:"th",type:"label",showLabel:!0},t))),l.createElement("tr",{key:"content-".concat(a),className:"".concat(n,"-row")},Z(o,e,(0,h.Z)({component:"td",type:"content",showContent:!0},t)))):l.createElement("tr",{key:a,className:"".concat(n,"-row")},Z(o,e,(0,h.Z)({component:c?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},y=function(e){return e.children},v=n(1113),g=l.createContext({}),j={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function b(e,t,n){var r=e;return(void 0===t||t>n)&&(r=(0,v.Tm)(e,{span:n}),(0,d.Z)(void 0===t,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),r}function w(e){var t,n=e.prefixCls,c=e.title,d=e.extra,h=e.column,m=void 0===h?j:h,p=e.colon,Z=void 0===p||p,y=e.bordered,v=e.layout,w=e.children,E=e.className,C=e.style,S=e.size,P=e.labelStyle,R=e.contentStyle,N=l.useContext(f.E_),M=N.getPrefixCls,T=N.direction,k=M("descriptions",n),O=l.useState({}),z=(0,o.Z)(O,2),A=z[0],I=z[1],L=function(e,t){if("number"===typeof e)return e;if("object"===(0,a.Z)(e))for(var n=0;n<u.c4.length;n++){var r=u.c4[n];if(t[r]&&void 0!==e[r])return e[r]||j[r]}return 3}(m,A);l.useEffect((function(){var e=u.ZP.subscribe((function(e){"object"===(0,a.Z)(m)&&I(e)}));return function(){u.ZP.unsubscribe(e)}}),[]);var D=function(e,t){var n=(0,i.Z)(e).filter((function(e){return e})),r=[],o=[],a=t;return n.forEach((function(e,l){var c,s=null===(c=e.props)||void 0===c?void 0:c.span,i=s||1;if(l===n.length-1)return o.push(b(e,s,a)),void r.push(o);i<a?(a-=i,o.push(e)):(o.push(b(e,i,a)),r.push(o),a=t,o=[])})),r}(w,L),F=l.useMemo((function(){return{labelStyle:P,contentStyle:R}}),[P,R]);return l.createElement(g.Provider,{value:F},l.createElement("div",{className:s()(k,(t={},(0,r.Z)(t,"".concat(k,"-").concat(S),S&&"default"!==S),(0,r.Z)(t,"".concat(k,"-bordered"),!!y),(0,r.Z)(t,"".concat(k,"-rtl"),"rtl"===T),t),E),style:C},(c||d)&&l.createElement("div",{className:"".concat(k,"-header")},c&&l.createElement("div",{className:"".concat(k,"-title")},c),d&&l.createElement("div",{className:"".concat(k,"-extra")},d)),l.createElement("div",{className:"".concat(k,"-view")},l.createElement("table",null,l.createElement("tbody",null,D.map((function(e,t){return l.createElement(x,{key:t,index:t,colon:Z,prefixCls:k,vertical:"vertical"===v,bordered:y,row:e})})))))))}w.Item=y;var E=w},1333:function(e,t,n){var r=n(7462),o=n(4942),a=n(2791),l=n(1694),c=n.n(l),s=n(9077),i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};t.Z=function(e){return a.createElement(s.C,null,(function(t){var n,l=t.getPrefixCls,s=t.direction,u=e.prefixCls,d=e.type,f=void 0===d?"horizontal":d,h=e.orientation,m=void 0===h?"center":h,p=e.orientationMargin,Z=e.className,x=e.children,y=e.dashed,v=e.plain,g=i(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),j=l("divider",u),b=m.length>0?"-".concat(m):m,w=!!x,E="left"===m&&null!=p,C="right"===m&&null!=p,S=c()(j,"".concat(j,"-").concat(f),(n={},(0,o.Z)(n,"".concat(j,"-with-text"),w),(0,o.Z)(n,"".concat(j,"-with-text").concat(b),w),(0,o.Z)(n,"".concat(j,"-dashed"),!!y),(0,o.Z)(n,"".concat(j,"-plain"),!!v),(0,o.Z)(n,"".concat(j,"-rtl"),"rtl"===s),(0,o.Z)(n,"".concat(j,"-no-default-orientation-margin-left"),E),(0,o.Z)(n,"".concat(j,"-no-default-orientation-margin-right"),C),n),Z),P=(0,r.Z)((0,r.Z)({},E&&{marginLeft:p}),C&&{marginRight:p});return a.createElement("div",(0,r.Z)({className:S},g,{role:"separator"}),x&&a.createElement("span",{className:"".concat(j,"-inner-text"),style:P},x))}))}},7762:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(181);function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,l=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw l}}}}}}]);
//# sourceMappingURL=8606.cca4efcc.chunk.js.map