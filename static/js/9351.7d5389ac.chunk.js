"use strict";(self.webpackChunkwater_bs=self.webpackChunkwater_bs||[]).push([[9351],{4024:function(e,t,n){n.d(t,{Z:function(){return h}});var a=n(5861),o=n(9439),r=n(7757),i=n.n(r),s=n(2791),c=n(6904),l=n(4569),u=n.n(l),d=n(184);function h(e){var t=(0,s.useState)([]),n=(0,o.Z)(t,2),r=n[0],l=n[1];return(0,s.useEffect)((0,a.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("http://localhost:8080/qryType");case 2:t=e.sent,console.log(t),n=t.data.data.map((function(e,t){return{value:e.fathername,label:e.fathername,children:e.children.map((function(e,t){return{value:e.childname,label:e.childname}}))}})),l(n);case 6:case"end":return e.stop()}}),e)}))),[]),(0,d.jsx)(c.Z,{options:r,style:e.style,onChange:e.onChange||function(e){console.log(e)},placeholder:e.title||"\u7269\u54c1\u7c7b\u522b"})}},9351:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var a=n(9439),o=n(2791),r=n(3695),i=n(2126),s=n(3099),c=n(9228),l=n(9553),u=n(6755),d=n(2649),h=n(7309),f=n(2862),g=n(6106),m=n(914),Z=n(9389),p=n(6795),x=n(2464),j=n(2579),v=n(4024),y=n(4569),w=n.n(y),T=n(2426),C=n.n(T),M=n(6871),R=n(184);function E(){var e=(0,M.s0)(),t=(0,o.useState)([]),n=(0,a.Z)(t,2),y=n[0],T=n[1],E={title:"",message:"",mytype:"",wanttype:"",createrid:JSON.parse(localStorage.getItem("loginUser")).id},b={},P=JSON.parse(localStorage.getItem("loginUser")),z=(0,o.useState)(!1),k=(0,a.Z)(z,2),S=k[0],H=k[1],I=(0,o.useState)(!1),A=(0,a.Z)(I,2),L=A[0],N=A[1],_=(0,o.useState)(""),O=(0,a.Z)(_,2),Y=O[0],D=O[1],U=(0,o.useRef)(),q=(0,o.useRef)(),B=(0,o.useRef)(),J=(0,o.useRef)();(0,o.useEffect)((function(){return w().get("http://localhost:8080/qryMyChange?id="+P.id).then((function(e){console.log(e),"0"===e.data.state&&T(e.data.data)})),function(){console.log("menu-destroy")}}),[]);var V=function(e){"done"===e.file.status?(r.ZP.success("".concat(e.file.name,"\u56fe\u7247\u4e0a\u4f20\u6210\u529f")),setTimeout((function(){window.location.reload()}),500)):"error"===e.file.status&&r.ZP.error("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25,\u5c1d\u8bd5\u66f4\u6362\u53e6\u4e00\u5f20jpg\u56fe\u7247")};return(0,R.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[(0,R.jsx)(i.ZP,{itemLayout:"vertical",size:"large",pagination:{onChange:function(e){console.log(e)},pageSize:3},dataSource:y,renderItem:function(e){return(0,R.jsxs)(i.ZP.Item,{extra:(0,R.jsx)(s.Z,{direction:"vertical",children:(0,R.jsx)(c.Z,{placement:"topLeft",content:"\u70b9\u51fb\u4fee\u6539\u56fe\u7247",children:(0,R.jsx)(l.Z,{maxCount:1,action:"http://localhost:8080/saveChangeInfoPhoto?id=".concat(e.id),onChange:V,children:(0,R.jsx)(u.Z,{preview:!1,width:135,height:135,src:"http://localhost:8080/getChangeInfoPhoto?id=".concat(e.id)})})})}),children:[(0,R.jsx)(i.ZP.Item.Meta,{avatar:(0,R.jsx)(d.C,{src:"http://localhost:8080/getUserHead?id=".concat(e.createrid)}),title:"".concat(e.title),description:C()(Number(e.createtime)).format("YYYY-MM-DD HH:mm:ss")}),e.message," ",(0,R.jsx)("br",{}),(0,R.jsxs)(s.Z,{style:{marginTop:25},children:[(0,R.jsx)(h.Z,{icon:(0,R.jsx)(p.Z,{}),onClick:function(){var t;t=e.id,N(!0),D(t),B.current.state.value="",J.current.resizableTextArea.textArea.value="",console.log(b)},children:"\u4fee\u6539"}),(0,R.jsxs)(h.Z,{danger:!0,type:"primary",onClick:function(){var t;t=e.id,w().post("http://localhost:8080/deleteChangeInfo?id="+t).then((function(e){"0"===e.data.state&&(r.ZP.success(e.data.message,1),setTimeout((function(){window.location.reload()}),800))}))},children:[" \u5220\u9664",(0,R.jsx)(x.Z,{twoToneColor:"red"})]})]})]},e.id)}}),(0,R.jsx)("div",{style:{position:"fixed",right:30,bottom:20},children:(0,R.jsx)(h.Z,{onClick:function(){H(!0)},icon:(0,R.jsx)(j.Z,{width:100}),style:{width:100,height:40},type:"primary",children:"\u521b\u5efa"})}),(0,R.jsxs)(f.Z,{title:"\u521b\u5efa\u4ea4\u6362",visible:S,onOk:function(){r.ZP.destroy(),E.title=U.current.state.value,E.message=q.current.resizableTextArea.textArea.value,""==E.title||""==E.message||""==E.mytype||""==E.wanttype?(r.ZP.error("\u8bf7\u586b\u5199\u5b8c\u4ea4\u6362\u4fe1\u606f!"),setTimeout((function(){e("userMenu/myChange/*")}),200)):w().post("http://localhost:8080/makeChange",E).then((function(e){"0"===e.data.state&&(r.ZP.success(e.data.message,1),setTimeout((function(){window.location.reload()}),500))}))},onCancel:function(){H(!1)},centered:!0,children:[(0,R.jsx)(g.Z,{justify:"center",children:(0,R.jsx)(m.Z,{children:(0,R.jsx)(v.Z,{style:{width:"1.7REM",marginTop:"0.03REM"},title:"\u6211\u7684\u65e7\u7269\u7c7b\u522b",onChange:function(e){var t=e[e.length-1];console.log(t),E.mytype=t}})})}),(0,R.jsx)(g.Z,{justify:"center",children:(0,R.jsx)(m.Z,{children:(0,R.jsx)(v.Z,{title:"\u60f3\u8981\u7684\u7c7b\u522b",style:{width:"1.7REM",marginTop:"0.03REM"},onChange:function(e){var t=e[e.length-1];console.log(t),E.wanttype=t}})})}),(0,R.jsx)(g.Z,{justify:"center",children:(0,R.jsx)(m.Z,{children:(0,R.jsx)(Z.Z,{placeholder:"\u521b\u5efa\u6807\u9898",style:{width:"1.7REM",marginTop:"0.03REM"},ref:U})})}),(0,R.jsx)(g.Z,{justify:"center",children:(0,R.jsx)(m.Z,{children:(0,R.jsx)(Z.Z.TextArea,{placeholder:"\u5177\u4f53\u63cf\u8ff0",style:{width:"1.7REM",marginTop:"0.03REM"},ref:q})})})]}),(0,R.jsxs)(f.Z,{title:"\u4fee\u6539\u4fe1\u606f",visible:L,onOk:function(){b.title=B.current.state.value||null,b.message=J.current.resizableTextArea.textArea.value||null,b.id=Y,console.log("\u4fee\u6539\u540e\u7269\u54c1\u4fe1\u606f:",b),w().post("http://localhost:8080/updateChangeInfo",b).then((function(e){"0"===e.data.state?(r.ZP.success(e.data.message,1),setTimeout((function(){window.location.reload()}),1e3)):(r.ZP.error(e.data.message,1),setTimeout((function(){window.location.reload()}),1e3))})).catch((function(e){r.ZP.error("\u8bf7\u6c42\u8d85\u65f6!",1),setTimeout((function(){window.location.reload(),seteditVisible(!1)}),1e3)}))},onCancel:function(){N(!1),B.current.state.value="",J.current.state.value="",D(""),b={}},centered:!0,children:[(0,R.jsx)(g.Z,{justify:"center",children:(0,R.jsx)(m.Z,{children:(0,R.jsx)(v.Z,{title:"\u6211\u7684\u65e7\u7269\u7c7b\u522b",style:{width:"1.7REM",marginTop:"0.03REM"},onChange:function(e){var t=e[e.length-1];console.log(t),b.mytype=t}})})}),(0,R.jsx)(g.Z,{justify:"center",children:(0,R.jsx)(m.Z,{children:(0,R.jsx)(v.Z,{title:"\u60f3\u8981\u7684\u7c7b\u522b",style:{width:"1.7REM",marginTop:"0.03REM"},onChange:function(e){var t=e[e.length-1];console.log(t),b.wanttype=t}})})}),(0,R.jsx)(g.Z,{justify:"center",children:(0,R.jsx)(m.Z,{children:(0,R.jsx)(Z.Z,{placeholder:"\u521b\u5efa\u6807\u9898",style:{width:"1.7REM",marginTop:"0.03REM"},ref:B})})}),(0,R.jsx)(g.Z,{justify:"center",children:(0,R.jsx)(m.Z,{children:(0,R.jsx)(Z.Z.TextArea,{style:{width:"1.7REM",marginTop:"0.03REM"},placeholder:"\u5177\u4f53\u63cf\u8ff0",ref:J})})})]})]})}},2464:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(1413),o=n(2791),r={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M292.7 840h438.6l24.2-512h-487z",fill:t}},{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-504-72h304v72H360v-72zm371.3 656H292.7l-24.2-512h487l-24.2 512z",fill:e}}]}},name:"delete",theme:"twotone"},i=n(4291),s=function(e,t){return o.createElement(i.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:r}))};s.displayName="DeleteTwoTone";var c=o.forwardRef(s)},6795:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(1413),o=n(2791),r={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M761.1 288.3L687.8 215 325.1 577.6l-15.6 89 88.9-15.7z",fill:t}},{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89z",fill:e}}]}},name:"edit",theme:"twotone"},i=n(4291),s=function(e,t){return o.createElement(i.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:r}))};s.displayName="EditTwoTone";var c=o.forwardRef(s)}}]);
//# sourceMappingURL=9351.7d5389ac.chunk.js.map