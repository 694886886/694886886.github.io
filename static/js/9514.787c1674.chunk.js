"use strict";(self.webpackChunkwater_bs=self.webpackChunkwater_bs||[]).push([[9514],{4024:function(e,t,n){n.d(t,{Z:function(){return h}});var o=n(5861),a=n(9439),r=n(7757),l=n.n(r),s=n(2791),i=n(6904),c=n(4569),u=n.n(c),d=n(184);function h(e){var t=(0,s.useState)([]),n=(0,a.Z)(t,2),r=n[0],c=n[1];return(0,s.useEffect)((0,o.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("http://localhost:8080/qryType");case 2:t=e.sent,console.log(t),n=t.data.data.map((function(e,t){return{value:e.fathername,label:e.fathername,children:e.children.map((function(e,t){return{value:e.childname,label:e.childname}}))}})),c(n);case 6:case"end":return e.stop()}}),e)}))),[]),(0,d.jsx)(i.Z,{options:r,style:e.style,onChange:e.onChange||function(e){console.log(e)},placeholder:e.title||"\u7269\u54c1\u7c7b\u522b"})}},9514:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var o=n(9439),a=n(2791),r=n(3695),l=n(6904),s=n(2126),i=n(7309),c=n(6038),u=n(3099),d=n(9228),h=n(9553),f=n(6755),g=n(2649),m=n(2862),p=n(6106),x=n(914),Z=n(9389),j=n(6795),v=n(2464),y=n(4569),w=n.n(y),C=n(4024),T=n(2426),b=n.n(T),M=n(6871),P=n(116),E=n(184);function R(){var e=JSON.parse(localStorage.getItem("loginUser")),t={},n=((0,M.s0)(),(0,a.useState)([])),y=(0,o.Z)(n,2),T=y[0],R=y[1],I=(0,a.useState)([]),S=(0,o.Z)(I,2),k=S[0],A=S[1],_=(0,a.useState)(!1),z=(0,o.Z)(_,2),Y=z[0],H=z[1],L=(0,a.useRef)(),N=(0,a.useRef)(),q=(0,a.useState)(""),D=(0,o.Z)(q,2),O=D[0],U=D[1];(0,a.useEffect)((function(){return w().get("http://localhost:8080/qryAllChangeXme?id="+e.id).then((function(e){R(e.data.data),A(e.data.data)})),function(){}}),[]);var V=function(e){"done"===e.file.status?(r.ZP.success("".concat(e.file.name,"\u56fe\u7247\u4e0a\u4f20\u6210\u529f")),setTimeout((function(){window.location.reload()}),500)):"error"===e.file.status&&r.ZP.error("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25,\u5c1d\u8bd5\u66f4\u6362\u53e6\u4e00\u5f20jpg\u56fe\u7247")};return(0,E.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[(0,E.jsxs)("div",{style:{margin:20,display:"flex"},children:[(0,E.jsx)(C.Z,{onChange:function(e){if(e){var t=e.length-1;console.log("baclistdata",k),R(k);var n=e[t];console.log("\u7b5b\u9009\u7269\u54c1:",e),console.log("\u6700\u7ec8\u7b5b\u9009\u7269\u54c1str",n);var o=k.filter((function(e){return e.mytype===n}));console.log("\u7269\u54c1\u7c7b\u522b\u7b5b\u9009\u540e\u7684\u7ed3\u679c:",o),R(o)}else R(k)},title:"\u7269\u54c1\u7c7b\u522b\u7b5b\u9009"}),(0,E.jsx)(l.Z,{placeholder:"\u57ce\u5e02",onChange:function(e){if(console.log(e),e){console.log("baclistdata",k),R(k);for(var t="",n=0;n<e.length;n++)t+=e[n];console.log("\u7b5b\u9009\u7269\u54c1:",e),console.log("\u6700\u7ec8\u7b5b\u9009\u7269\u54c1str",t);var o=k.filter((function(e){return e.city===t}));console.log("\u7269\u54c1\u7c7b\u522b\u7b5b\u9009\u540e\u7684\u7ed3\u679c:",o),R(o)}else R(k)},options:P.Z,defaultValue:"",style:{marginLeft:20}})]}),(0,E.jsx)(s.ZP,{itemLayout:"vertical",size:"large",pagination:{onChange:function(e){console.log(e)},pageSize:3},dataSource:T,renderItem:function(e){return(0,E.jsxs)(s.ZP.Item,{actions:[(0,E.jsxs)(i.Z,{type:"primary",onClick:function(){var n;n=e.id,H(!0),U(n),L.current.state.value="",N.current.resizableTextArea.textArea.value="",console.log(t)},children:["\u7f16\u8f91",(0,E.jsx)(j.Z,{})]}),(0,E.jsx)(c.Z,{title:"\u5220\u9664?",onConfirm:function(){var t;t=e.id,console.log("\u8981\u5220\u9664\u7684id:",t),w().post("http://localhost:8080/deleteChangeInfo?id="+t).then((function(e){"0"===e.data.state&&(r.ZP.success(e.data.message,1),setTimeout((function(){window.location.reload()}),800))}))},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:(0,E.jsxs)(i.Z,{danger:!0,type:"primary",children:[" \u5220\u9664",(0,E.jsx)(v.Z,{twoToneColor:"red"})]})})],extra:(0,E.jsx)(u.Z,{direction:"vertical",children:(0,E.jsx)(d.Z,{placement:"topLeft",content:"\u70b9\u51fb\u4fee\u6539\u56fe\u7247",children:(0,E.jsx)(h.Z,{maxCount:1,action:"http://localhost:8080/saveChangeInfoPhoto?id=".concat(e.id),onChange:V,children:(0,E.jsx)(f.Z,{preview:!1,width:135,height:135,src:"http://localhost:8080/getChangeInfoPhoto?id=".concat(e.id)})})})}),children:[(0,E.jsx)(s.ZP.Item.Meta,{avatar:(0,E.jsx)(g.C,{src:"http://localhost:8080/getUserHead?id=".concat(e.createrid)}),title:"".concat(e.title),description:b()(Number(e.createtime)).format("YYYY-MM-DD HH:mm:ss")}),e.message]},e.id)}}),(0,E.jsxs)(m.Z,{title:"\u4fee\u6539\u4fe1\u606f",visible:Y,onOk:function(){t.title=L.current.state.value||null,t.message=N.current.resizableTextArea.textArea.value||null,t.id=O,console.log("\u4fee\u6539\u540e\u7269\u54c1\u4fe1\u606f:",t),H(!1),w().post("http://localhost:8080/updateChangeInfo",t).then((function(e){"0"===e.data.state?(r.ZP.success(e.data.message,1),setTimeout((function(){window.location.reload()}),1e3)):(r.ZP.error(e.data.message,1),setTimeout((function(){window.location.reload()}),1e3))})).catch((function(e){r.ZP.error("\u8bf7\u6c42\u8d85\u65f6!",1),setTimeout((function(){window.location.reload(),seteditVisible(!1)}),1e3)}))},onCancel:function(){H(!1),L.current.state.value="",N.current.state.value="",U(""),t={}},centered:!0,children:[(0,E.jsx)(p.Z,{justify:"center",children:(0,E.jsx)(x.Z,{children:(0,E.jsx)(C.Z,{title:"\u6211\u7684\u65e7\u7269\u7c7b\u522b",style:{width:"1.7REM",marginTop:"0.03REM"},onChange:function(e){var n=e[e.length-1];console.log(n),t.mytype=n}})})}),(0,E.jsx)(p.Z,{justify:"center",children:(0,E.jsx)(x.Z,{children:(0,E.jsx)(C.Z,{title:"\u60f3\u8981\u7684\u7c7b\u522b",style:{width:"1.7REM",marginTop:"0.03REM"},onChange:function(e){var n=e[e.length-1];console.log(n),t.wanttype=n}})})}),(0,E.jsx)(p.Z,{justify:"center",children:(0,E.jsx)(x.Z,{children:(0,E.jsx)(Z.Z,{placeholder:"\u521b\u5efa\u6807\u9898",style:{width:"1.7REM",marginTop:"0.03REM"},ref:L})})}),(0,E.jsx)(p.Z,{justify:"center",children:(0,E.jsx)(x.Z,{children:(0,E.jsx)(Z.Z.TextArea,{style:{width:"1.7REM",marginTop:"0.03REM"},placeholder:"\u5177\u4f53\u63cf\u8ff0",ref:N})})})]})]})}}}]);
//# sourceMappingURL=9514.787c1674.chunk.js.map